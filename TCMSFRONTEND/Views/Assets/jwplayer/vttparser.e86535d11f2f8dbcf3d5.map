{"version":3,"file":"vttparser.js","sources":["webpack:///vttparser.js"],"sourcesContent":["webpackJsonpjwplayer([8],{39:function(e,t,n){var r,i;r=[n(38)],i=function(e){function t(){return{decode:function(e){if(!e)return\"\";if(\"string\"!=typeof e)throw new Error(\"Error - expected string data.\");return decodeURIComponent(encodeURIComponent(e))}}}function n(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(\":\",\"\"),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function r(){this.values=Object.create(null)}function i(e,t,n,r){var i=r?e.split(r):[e];for(var s in i)if(\"string\"==typeof i[s]){var a=i[s].split(n);if(2===a.length){var o=a[0],u=a[1];t(o,u)}}}function s(e,t,s){function a(){var t=n(e);if(null===t)throw new Error(\"Malformed timestamp: \"+c);return e=e.replace(/^[^\\sa-zA-Z-]+/,\"\"),t}function o(e,t){var n=new r;i(e,function(e,t){switch(e){case\"region\":for(var r=s.length-1;r>=0;r--)if(s[r].id===t){n.set(e,s[r].region);break}break;case\"vertical\":n.alt(e,t,[\"rl\",\"lr\"]);break;case\"line\":var i=t.split(\",\"),a=i[0];n.integer(e,a),n.percent(e,a)&&n.set(\"snapToLines\",!1),n.alt(e,a,[\"auto\"]),2===i.length&&n.alt(\"lineAlign\",i[1],[\"start\",\"middle\",\"end\"]);break;case\"position\":i=t.split(\",\"),n.percent(e,i[0]),2===i.length&&n.alt(\"positionAlign\",i[1],[\"line-left\",\"middle\",\"line-right\",\"auto\"]);break;case\"size\":n.percent(e,t);break;case\"align\":n.alt(e,t,[\"start\",\"middle\",\"end\",\"left\",\"right\"])}},/:/,/\\s/),t.region=n.get(\"region\",null),t.vertical=n.get(\"vertical\",\"\"),t.line=n.get(\"line\",\"auto\"),t.lineAlign=n.get(\"lineAlign\",\"start\"),t.snapToLines=n.get(\"snapToLines\",!0),t.size=n.get(\"size\",100),t.align=n.get(\"align\",\"middle\"),t.position=n.get(\"position\",\"auto\"),t.positionAlign=n.get(\"positionAlign\",\"auto\")}function u(){e=e.replace(/^\\s+/,\"\")}var c=e;if(u(),t.startTime=a(),u(),\"-->\"!==e.substr(0,3))throw new Error(\"Malformed time stamp (time stamps must be separated by '-->'): \"+c);e=e.substr(3),u(),t.endTime=a(),u(),o(e,t)}var a=function(e,n){this.window=e,this.state=\"INITIAL\",this.buffer=\"\",this.decoder=n||new t,this.regionList=[]};return r.prototype={set:function(e,t){this.get(e)||\"\"===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var n;return!!((n=t.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/))&&(t=parseFloat(t),t>=0&&t<=100))&&(this.set(e,t),!0)}},a.prototype={parse:function(t){function n(){for(var e=a.buffer,t=0;t<e.length&&\"\\r\"!==e[t]&&\"\\n\"!==e[t];)++t;var n=e.substr(0,t);return\"\\r\"===e[t]&&++t,\"\\n\"===e[t]&&++t,a.buffer=e.substr(t),n}function r(e){i(e,function(e,t){switch(e){case\"Region\":console.log(\"parse region\",t)}},/:/)}var a=this;t&&(a.buffer+=a.decoder.decode(t,{stream:!0}));try{var o;if(\"INITIAL\"===a.state){if(!/\\r\\n|\\n/.test(a.buffer))return this;o=n();var u=o.match(/^WEBVTT([ \\t].*)?$/);if(!u||!u[0])throw new Error(\"Malformed WebVTT signature.\");a.state=\"HEADER\"}for(var c=!1;a.buffer;){if(!/\\r\\n|\\n/.test(a.buffer))return this;switch(c?c=!1:o=n(),a.state){case\"HEADER\":/:/.test(o)?r(o):o||(a.state=\"ID\");continue;case\"NOTE\":o||(a.state=\"ID\");continue;case\"ID\":if(/^NOTE($|[ \\t])/.test(o)){a.state=\"NOTE\";break}if(!o)continue;if(a.cue=new e(0,0,\"\"),a.state=\"CUE\",o.indexOf(\"-->\")===-1){a.cue.id=o;continue}case\"CUE\":try{s(o,a.cue,a.regionList)}catch(f){a.cue=null,a.state=\"BADCUE\";continue}a.state=\"CUETEXT\";continue;case\"CUETEXT\":var l=o.indexOf(\"-->\")!==-1;if(!o||l&&(c=!0)){a.oncue&&a.oncue(a.cue),a.cue=null,a.state=\"ID\";continue}a.cue.text&&(a.cue.text+=\"\\n\"),a.cue.text+=o;continue;case\"BADCUE\":o||(a.state=\"ID\");continue}}}catch(f){\"CUETEXT\"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state=\"INITIAL\"===a.state?\"BADWEBVTT\":\"BADCUE\"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||\"HEADER\"===e.state)&&(e.buffer+=\"\\n\\n\",e.parse()),\"INITIAL\"===e.state)throw new Error(\"Malformed WebVTT signature.\")}catch(t){throw t}return e.onflush&&e.onflush(),this}},a}.apply(t,r),!(void 0!==i&&(e.exports=i))}});\n\n\n/** WEBPACK FOOTER **\n ** vttparser.js\n **/"],"mappings":"AAAA","sourceRoot":""}